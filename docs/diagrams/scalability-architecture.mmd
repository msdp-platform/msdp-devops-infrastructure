graph TB
    subgraph "Load Balancer Layer"
        LB[Load Balancer]
        CDN[CDN]
    end
    
    subgraph "Application Layer"
        API1[API Gateway 1]
        API2[API Gateway 2]
        API3[API Gateway 3]
    end
    
    subgraph "Database Layer"
        subgraph "Primary Database"
            MASTER[(PostgreSQL Master)]
            SLAVE1[(PostgreSQL Slave 1)]
            SLAVE2[(PostgreSQL Slave 2)]
            SLAVE3[(PostgreSQL Slave 3)]
        end
        
        subgraph "Cache Layer"
            REDIS1[(Redis Cluster 1)]
            REDIS2[(Redis Cluster 2)]
            REDIS3[(Redis Cluster 3)]
        end
        
        subgraph "Search Layer"
            ES1[(Elasticsearch Node 1)]
            ES2[(Elasticsearch Node 2)]
            ES3[(Elasticsearch Node 3)]
        end
    end
    
    subgraph "Partitioning Strategy"
        ORDERS_2024[Orders 2024]
        ORDERS_2025[Orders 2025]
        TRACKING_W1[Tracking Week 1]
        TRACKING_W2[Tracking Week 2]
    end
    
    LB --> API1
    LB --> API2
    LB --> API3
    
    API1 --> MASTER
    API2 --> SLAVE1
    API3 --> SLAVE2
    
    MASTER --> SLAVE1
    MASTER --> SLAVE2
    MASTER --> SLAVE3
    
    API1 --> REDIS1
    API2 --> REDIS2
    API3 --> REDIS3
    
    API1 --> ES1
    API2 --> ES2
    API3 --> ES3
    
    MASTER --> ORDERS_2024
    MASTER --> ORDERS_2025
    MASTER --> TRACKING_W1
    MASTER --> TRACKING_W2
